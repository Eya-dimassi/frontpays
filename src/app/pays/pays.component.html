<div class="container">
  <div class="card shadow mb-4">
    <div class="card-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>#</th>
            <th>Nom du pays</th>
            <th>Population</th>
            <th>Continent</th>
            <th>Date d'indépendance</th>
            <th>Classification</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          @for (p of pays; track p.idPays; let index = $index; let count = $count; let first = $first) {
            @if (first) {
              <tr>
                <td colspan="7">
                  <strong>Nombre total de pays : {{ count }}</strong>
                </td>
              </tr>
            }

            <tr>
              <td>{{ index + 1 }}</td>
              <td>{{ p.nomPays }}</td>
              <td>{{ p.population }}</td>
              <td>{{ p.continent }}</td>
              <td>{{ p.independenceDate | date: 'dd/MM/yyyy' }}</td>
              <td>
                @if (p.classification) {
                  {{ p.classification.nomClass }}
                } @else {
                  <em>Pas de classification</em>
                }
              </td>
              @if(authService.isAdmin()) {
              <td>
                <a class="btn btn-danger btn-sm" (click)="supprimerPays(p)">Supprimer</a>
                <a class="btn btn-success btn-sm" [routerLink]="['/updatePays', p.idPays]">Modifier</a>
              </td>}
            </tr>
          }

          @empty {
            <tr>
              <td colspan="7">
                <h5 class="text-center">Aucun pays trouvé !</h5>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
